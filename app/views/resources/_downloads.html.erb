<div>
  <% if current_user.try(:admin?) %>
    <div class="actions">
      <%= link_to 'New Download', new_download_path, class: "btn btn-primary btn-lg btn-block" %>
    </div>
    <div class="fh5co-spacer fh5co-spacer-md"></div>
  <% end %>
</div>

<% @downloads.in_groups_of(3, false).each do |item1, item2, item3| %>
  <div class="row">
    <% if item1 %>
    <%= link_to rails_blob_path(item1.en_file, disposition: "attachment") do %>
      <div class="col-md-4 col-sm-4 fh5co-feature-item">
        <div class="<%=item1.category%> text-center">
          <% case %>
            <% when params[:locale] == "en" %>
              <span class="fh5co-feature-icon">
                <% if item1.en_file.attached? %>
                  <% if item1.en_file.representable? %>
                    <i><%= image_tag item1.en_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item1.en_title %></h2>

            <% when params[:locale] == "zh_TW" %>
              <span class="fh5co-feature-icon">
                <% if item1.zh_tw_file.attached? %>
                  <% if item1.zh_tw_file.representable? %>
                    <i><%= image_tag item1.zh_tw_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item1.zh_tw_title %></h2>

            <% when params[:locale] == "zh_CN" %>
              <span class="fh5co-feature-icon">
                <% if item1.zh_cn_file.attached? %>
                  <% if item1.zh_cn_file.representable? %>
                    <i><%= image_tag item1.zh_cn_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item1.zh_cn_title %></h2>

            <% when params[:locale] == "vi" %>
              <span class="fh5co-feature-icon">
                <% if item1.vi_file.attached? %>
                  <% if item1.vi_file.representable? %>
                    <i><%= image_tag item1.vi_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item1.vi_title %></h2>

            <% when params[:locale] == "hmn" %>
              <span class="fh5co-feature-icon">
                <% if item1.hmn_file.attached? %>
                  <% if item1.hmn_file.representable? %>
                    <i><%= image_tag item1.hmn_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item1.hmn_title %></h2>

              <% end %> <!-- end case -->
            </div>
            <div class="fh5co-spacer fh5co-spacer-sm"></div>
          </div>
          <% end %> <!-- end link_to -->
        <% end %> <!-- end if item1 -->

    <% if item2 %>
    <%= link_to rails_blob_path(item2.en_file, disposition: "attachment") do %>
      <div class="col-md-4 col-sm-4 fh5co-feature-item">
        <div class="<%=item2.category%> text-center">
          <% case %>
            <% when params[:locale] == "en" %>
              <span class="fh5co-feature-icon">
                <% if item2.en_file.attached? %>
                  <% if item2.en_file.representable? %>
                    <i><%= image_tag item2.en_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item2.en_title %></h2>

            <% when params[:locale] == "zh_TW" %>
              <span class="fh5co-feature-icon">
                <% if item2.zh_tw_file.attached? %>
                  <% if item2.zh_tw_file.representable? %>
                    <i><%= image_tag item2.zh_tw_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item2.zh_tw_title %></h2>

            <% when params[:locale] == "zh_CN" %>
              <span class="fh5co-feature-icon">
                <% if item2.zh_cn_file.attached? %>
                  <% if item2.zh_cn_file.representable? %>
                    <i><%= image_tag item2.zh_cn_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item2.zh_cn_title %></h2>

            <% when params[:locale] == "vi" %>
              <span class="fh5co-feature-icon">
                <% if item2.vi_file.attached? %>
                  <% if item2.vi_file.representable? %>
                    <i><%= image_tag item2.vi_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item2.vi_title %></h2>

            <% when params[:locale] == "hmn" %>
              <span class="fh5co-feature-icon">
                <% if item2.hmn_file.attached? %>
                  <% if item2.hmn_file.representable? %>
                    <i><%= image_tag item2.hmn_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item2.hmn_title %></h2>
              <% end %> <!-- end case -->
            </div>
          <div class="fh5co-spacer fh5co-spacer-sm"></div>
          </div>
        <% end %> <!-- end link_to -->
      <% end %> <!-- end if item2 -->

    <% if item3 %>
    <%= link_to rails_blob_path(item3.en_file, disposition: "attachment") do %>
      <div class="col-md-4 col-sm-4 fh5co-feature-item">
        <div class="<%=item3.category%> text-center">
          <% case %>
            <% when params[:locale] == "en" %>
              <span class="fh5co-feature-icon">
                <% if item3.en_file.attached? %>
                  <% if item3.en_file.representable? %>
                    <i><%= image_tag item3.en_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item3.en_title %></h2>

            <% when params[:locale] == "zh_TW" %>
              <span class="fh5co-feature-icon">
                <% if item3.zh_tw_file.attached? %>
                  <% if item3.zh_tw_file.representable? %>
                    <i><%= image_tag item3.zh_tw_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item3.zh_tw_title %></h2>

            <% when params[:locale] == "zh_CN" %>
              <span class="fh5co-feature-icon">
                <% if item3.zh_cn_file.attached? %>
                  <% if item3.zh_cn_file.representable? %>
                    <i><%= image_tag item3.zh_cn_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item3.zh_cn_title %></h2>

            <% when params[:locale] == "vi" %>
              <span class="fh5co-feature-icon">
                <% if item3.vi_file.attached? %>
                  <% if item3.vi_file.representable? %>
                    <i><%= image_tag item3.vi_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item3.vi_title %></h2>

            <% when params[:locale] == "hmn" %>
              <span class="fh5co-feature-icon">
                <% if item3.hmn_file.attached? %>
                  <% if item3.hmn_file.representable? %>
                    <i><%= image_tag item3.hmn_file.representation(resize_to_limit: [400, 600]), class: "img-fluid", :style => "max-width: 90%; height: auto"%></i>
                  <% end %>
                <% else %>
                  <i class="ti-layout-placeholder" style="color:red;"></i>
                <% end %>
              </span>
              <h2 class="text-center fh5co-feature-title h4 text-uppercase"><%= item3.hmn_title %></h2>

            <% end %> <!-- end case -->
          </div>
        <div class="fh5co-spacer fh5co-spacer-md"></div>
      </div>
      <% end %> <!-- end link_to -->
    <% end %> <!-- end if item3 -->

  </div>
<% end %>
